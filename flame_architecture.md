# Flame ê²Œì„ ì—”ì§„ ìœ„ì ¯ ìƒíƒœê³„

## ì „ì²´ êµ¬ì¡°ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Flutter App (main.dart)                   â”‚
â”‚                        runApp()                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      GameWidget<T>                           â”‚
â”‚              (Flutter Widget - Bridge)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â€¢ game: T extends Game                              â”‚   â”‚
â”‚  â”‚  â€¢ overlayBuilderMap: Map<String, OverlayBuilder>    â”‚   â”‚
â”‚  â”‚  â€¢ loadingBuilder, backgroundBuilder, errorBuilder   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Game (Base Interface)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â€¢ update(dt)                                         â”‚   â”‚
â”‚  â”‚  â€¢ render(canvas)                                     â”‚   â”‚
â”‚  â”‚  â€¢ onGameResize(size)                                â”‚   â”‚
â”‚  â”‚  â€¢ lifecycleStateChange()                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              FlameGame<W extends World>                      â”‚
â”‚           (Flame Component System - FCS)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â€¢ ComponentTreeRoot                                 â”‚   â”‚
â”‚  â”‚  â€¢ camera: CameraComponent                           â”‚   â”‚
â”‚  â”‚  â€¢ world: W (World)                                  â”‚   â”‚
â”‚  â”‚  â€¢ overlays: OverlayManager                          â”‚   â”‚
â”‚  â”‚  â€¢ componentsNotifier                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                     â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  CameraComponent      â”‚    â”‚   World             â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚ â€¢ viewport      â”‚  â”‚    â”‚  â”‚  ê²Œì„ ë¡œì§    â”‚   â”‚
    â”‚  â”‚ â€¢ viewfinder    â”‚  â”‚    â”‚  â”‚  ë° ì—”í‹°í‹°    â”‚   â”‚
    â”‚  â”‚ â€¢ world         â”‚â—„â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”¤  ì»¨í…Œì´ë„ˆ     â”‚   â”‚
    â”‚  â”‚ â€¢ follow()      â”‚  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚  â”‚ â€¢ setBounds()   â”‚  â”‚    â”‚                     â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
                                             â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚      Components            â”‚
                            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                            â”‚  â”‚ SpriteComponent      â”‚  â”‚
                            â”‚  â”‚ SpriteAnimationComp  â”‚  â”‚
                            â”‚  â”‚ PositionComponent    â”‚  â”‚
                            â”‚  â”‚ CircleComponent      â”‚  â”‚
                            â”‚  â”‚ RectangleComponent   â”‚  â”‚
                            â”‚  â”‚ TextComponent        â”‚  â”‚
                            â”‚  â”‚ ParticleSystem       â”‚  â”‚
                            â”‚  â”‚ TimerComponent       â”‚  â”‚
                            â”‚  â”‚ ...                  â”‚  â”‚
                            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ê³„ì¸µë³„ ìƒì„¸ ì„¤ëª…

### 1. Flutter Layer (ìƒìœ„ ë ˆì´ì–´)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MaterialApp/CupertinoApp â”‚
â”‚         (Flutter)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     GameWidget<T>       â”‚  â—„â”€â”€ Flutter Widget
â”‚   (flame package)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**GameWidgetì˜ ì£¼ìš” ê¸°ëŠ¥:**
- Flutterì™€ Flame ê²Œì„ ë£¨í”„ë¥¼ ì—°ê²°
- UI ì˜¤ë²„ë ˆì´ ê´€ë¦¬ (overlayBuilderMap)
- ë¡œë”©/ì—ëŸ¬ í™”ë©´ ì²˜ë¦¬
- ê²Œì„ ìƒëª…ì£¼ê¸° ê´€ë¦¬

### 2. Game Core Layer (ì¤‘ê°„ ë ˆì´ì–´)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          FlameGame<World>            â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Component Tree Root        â”‚    â”‚
â”‚  â”‚  (Flame Component System)   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Camera    â”‚    â”‚   World     â”‚  â”‚
â”‚  â”‚ Component  â”‚â”€â”€â”€â–¶â”‚ (ê²Œì„ ì„¸ê³„) â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**FlameGameì˜ í•µì‹¬ êµ¬ì„±ìš”ì†Œ:**
- **CameraComponent**: ë·°í¬íŠ¸ ë° ì¹´ë©”ë¼ ì œì–´
- **World**: ê²Œì„ ì—”í‹°í‹° ì»¨í…Œì´ë„ˆ
- **ComponentTreeRoot**: ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ ê´€ë¦¬

### 3. Component Layer (í•˜ìœ„ ë ˆì´ì–´)
```
World
  â”‚
  â”œâ”€â”€ PositionComponent
  â”‚     â”œâ”€â”€ SpriteComponent
  â”‚     â”œâ”€â”€ SpriteAnimationComponent
  â”‚     â””â”€â”€ CircleComponent
  â”‚
  â”œâ”€â”€ EffectComponent
  â”‚     â”œâ”€â”€ MoveEffect
  â”‚     â”œâ”€â”€ ScaleEffect
  â”‚     â””â”€â”€ RotateEffect
  â”‚
  â””â”€â”€ Mixins (í–‰ë™ ì¶”ê°€)
        â”œâ”€â”€ TapCallbacks
        â”œâ”€â”€ DragCallbacks
        â”œâ”€â”€ HasGameRef
        â”œâ”€â”€ CollisionCallbacks
        â””â”€â”€ KeyboardHandler
```

## ì´ë²¤íŠ¸ ë° ë°ì´í„° íë¦„

```
User Input
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GameWidget     â”‚ â”€â”€â”€ Flutter ì´ë²¤íŠ¸ ìˆ˜ì‹ 
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     (Tap, Drag, Keyboard)
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FlameGame      â”‚ â”€â”€â”€ ê²Œì„ ë£¨í”„
â”‚  â€¢ update(dt)   â”‚     (60fps ê¸°ë³¸)
â”‚  â€¢ render()     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚ Camera â”‚ â”‚World â”‚ â”€â”€â”€ ì»´í¬ë„ŒíŠ¸ ì—…ë°ì´íŠ¸
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”˜     ë° ë Œë”ë§
               â”‚
         â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
         â–¼           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Player  â”‚  â”‚Enemy   â”‚
    â”‚(Sprite)â”‚  â”‚(Sprite)â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ìƒëª…ì£¼ê¸° (Lifecycle)

```
Component Lifecycle:
    
    onLoad()
       â”‚
       â–¼
    onMount()
       â”‚
       â–¼
    update(dt) â—„â”€â”
       â”‚         â”‚
       â–¼         â”‚
    render()  â”€â”€â”€â”˜ (ê²Œì„ ë£¨í”„)
       â”‚
       â–¼
    onRemove()
       â”‚
       â–¼
    finalizeRemoval()
```

## ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ (í˜„ì¬ í”„ë¡œì íŠ¸)

```dart
main()
  â””â”€â”€ runApp(
        GameWidget(
          game: MyGame(),                    // â† FlameGame ì¸ìŠ¤í„´ìŠ¤
          overlayBuilderMap: {               // â† UI ì˜¤ë²„ë ˆì´
            'PauseMenu': (context, game) {
              return Container(
                child: Text('A pause menu'),
              );
            },
          },
        ),
      )

MyGame (extends FlameGame)
  â”œâ”€â”€ camera: CameraComponent              // ìë™ ìƒì„±
  â””â”€â”€ world: MyWorld (extends World)       // ê²Œì„ ì„¸ê³„
        â””â”€â”€ Player (extends SpriteComponent with TapCallbacks)
              â”œâ”€â”€ sprite: Sprite
              â”œâ”€â”€ position: Vector2
              â”œâ”€â”€ size: Vector2
              â””â”€â”€ onTapUp/onTapDown ì´ë²¤íŠ¸
```

## ì£¼ìš” íŠ¹ì§•

### ğŸ® **Flame Component System (FCS)**
- ê³„ì¸µì  ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
- ìë™ ì—…ë°ì´íŠ¸/ë Œë”ë§
- ìƒëª…ì£¼ê¸° ê´€ë¦¬
- ì´ë²¤íŠ¸ ë²„ë¸”ë§

### ğŸ“· **Camera System**
- ë·°í¬íŠ¸ ê´€ë¦¬
- ì¤Œ/íŒ¬ ì œì–´
- ì¹´ë©”ë¼ ê²½ê³„ ì„¤ì •
- ì—”í‹°í‹° ì¶”ì  (follow)

### ğŸŒ **World Container**
- ê²Œì„ ì—”í‹°í‹° ì»¨í…Œì´ë„ˆ
- ì¹´ë©”ë¼ë¡œë¶€í„° ë…ë¦½ì 
- ì¢Œí‘œê³„ ê´€ë¦¬

### ğŸ¨ **Overlay System**
- Flutter ìœ„ì ¯ê³¼ í†µí•©
- UI ë ˆì´ì–´ (ë©”ë‰´, HUD ë“±)
- ë™ì  ì¶”ê°€/ì œê±°

### ğŸ”„ **Game Loop**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   60 FPS ê²Œì„ ë£¨í”„    â”‚
â”‚                      â”‚
â”‚  update(dt) â†’ ë¬¼ë¦¬   â”‚
â”‚       â†“              â”‚
â”‚  render() â†’ ê·¸ë˜í”½   â”‚
â”‚       â†“              â”‚
â”‚  í™”ë©´ ì¶œë ¥           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ìš”ì•½

Flameì€ **Flutter ìœ„ì— êµ¬ì¶•ëœ ê²Œì„ ì—”ì§„**ìœ¼ë¡œ:
1. **GameWidget**ì´ Flutterì™€ ì—°ê²°
2. **FlameGame**ì´ ê²Œì„ ë¡œì§ ê´€ë¦¬
3. **Component**ë“¤ì´ ê²Œì„ ì—”í‹°í‹° êµ¬ì„±
4. **Camera/World** ì‹œìŠ¤í…œìœ¼ë¡œ í™”ë©´ ê´€ë¦¬
5. **Overlay**ë¡œ UI í†µí•©

ì´ êµ¬ì¡°ëŠ” **Unityì˜ GameObject ì‹œìŠ¤í…œ**ì´ë‚˜ **Godotì˜ Node ì‹œìŠ¤í…œ**ê³¼ ìœ ì‚¬í•œ ê³„ì¸µì  êµ¬ì¡°ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
